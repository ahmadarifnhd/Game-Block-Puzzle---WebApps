<!DOCTYPE html>
<html>
<head>
    <title>Touch Debug</title>
    <style>
        #canvas {
            border: 2px solid red;
            width: 400px;
            height: 550px;
            background: #303036;
            display: block;
            touch-action: none;
        }
        #log {
            border: 1px solid black;
            height: 300px;
            overflow-y: auto;
            padding: 10px;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>Touch Debug</h1>
    <canvas id="canvas"></canvas>
    <div id="log"></div>
    
    <script>
        const canvas = document.getElementById('canvas');
        const log = document.getElementById('log');
        
        function addLog(msg) {
            log.innerHTML += msg + '<br>';
            log.scrollTop = log.scrollHeight;
        }
        
        addLog('Page loaded');
        addLog('Canvas: ' + (canvas ? 'FOUND' : 'NOT FOUND'));
        
        // Touch events
        canvas.addEventListener('touchstart', (e) => {
            addLog('TOUCHSTART fired! Touches: ' + e.touches.length);
            if (e.touches.length > 0) {
                const t = e.touches[0];
                const rect = canvas.getBoundingClientRect();
                addLog('Touch at: ' + t.clientX + ',' + t.clientY);
                addLog('Canvas rect: ' + JSON.stringify({left: rect.left, top: rect.top, width: rect.width, height: rect.height}));
                addLog('Relative pos: ' + (t.clientX - rect.left) + ',' + (t.clientY - rect.top));
            }
        });
        
        canvas.addEventListener('touchmove', (e) => {
            addLog('TOUCHMOVE fired');
            e.preventDefault();
        });
        
        canvas.addEventListener('touchend', (e) => {
            addLog('TOUCHEND fired');
        });
        
        canvas.addEventListener('mousedown', (e) => {
            addLog('MOUSEDOWN fired');
        });
        
        // Initial check
        addLog('Canvas tabindex: ' + canvas.tabIndex);
        addLog('Canvas ready for touches');
    </script>
</body>
</html>
